<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no"/>
<title>Â∞èÁéâ„ÅÆÁΩëÁ´ô</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  html, body { 
    height: 100%; 
    background: #020214; 
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans SC", "Microsoft YaHei", sans-serif;
    -webkit-user-select: none; 
    -ms-user-select: none; 
    user-select: none;
    overflow: hidden;
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: transparent;
  }
  
  canvas { 
    display: block; 
    width: 100vw; 
    height: 100vh; 
    position: fixed;
    top: 0;
    left: 0;
    z-index: 1;
  }
  
  .content {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 10;
    padding: 20px;
    text-align: center;
    transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .question {
    font-size: clamp(24px, 5vw, 36px);
    color: #fff;
    margin-bottom: 50px;
    text-shadow: 0 0 20px rgba(255,255,255,0.9), 0 0 40px rgba(135,206,250,0.7), 0 0 60px rgba(255,182,193,0.5);
    animation: glow 2s ease-in-out infinite alternate;
    font-weight: 700;
    line-height: 1.4;
    letter-spacing: 1px;
  }
  
  @keyframes glow {
    from { 
      text-shadow: 0 0 20px rgba(255,255,255,0.9), 0 0 40px rgba(135,206,250,0.7), 0 0 60px rgba(255,182,193,0.5);
      transform: scale(1);
    }
    to { 
      text-shadow: 0 0 30px rgba(255,255,255,1), 0 0 60px rgba(135,206,250,0.9), 0 0 80px rgba(255,182,193,0.7);
      transform: scale(1.02);
    }
  }
  
  .button-container {
    display: flex;
    gap: 30px;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
  }
  
  .btn {
    padding: 18px 36px;
    border: none;
    border-radius: 30px;
    font-size: 20px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    box-shadow: 0 12px 40px rgba(0,0,0,0.4);
    backdrop-filter: blur(15px);
    border: 2px solid rgba(255,255,255,0.1);
  }
  
  .btn:before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: left 0.6s;
  }
  
  .btn:hover:before {
    left: 100%;
  }
  
  .btn-yes {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
    color: white;
    min-width: 180px;
    transform: scale(1.2);
    box-shadow: 0 15px 50px rgba(102, 126, 234, 0.4);
  }
  
  .btn-no {
    background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 50%, #fd79a8 100%);
    color: white;
    min-width: 120px;
    transform: scale(0.7);
    box-shadow: 0 8px 30px rgba(255, 107, 107, 0.3);
  }
  
  .btn:active {
    transform: scale(0.95) !important;
  }
  
  .result-message {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: clamp(20px, 4vw, 28px);
    color: #fff;
    text-align: center;
    opacity: 0;
    text-shadow: 0 0 30px rgba(255,255,255,0.9), 0 0 50px rgba(255,182,193,0.7);
    font-weight: 700;
    line-height: 1.6;
    z-index: 30;
    padding: 30px;
    border-radius: 20px;
    background: rgba(0,0,0,0.3);
    backdrop-filter: blur(20px);
    border: 2px solid rgba(255,255,255,0.1);
    max-width: 90%;
    transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .heart-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 25;
  }
  
  .heart {
    position: absolute;
    font-size: 30px;
    animation: heartFloat 4s ease-out forwards;
    text-shadow: 0 0 15px rgba(255,105,180,0.9);
  }
  
  @keyframes heartFloat {
    0% {
      opacity: 1;
      transform: translateY(0) scale(0.5) rotate(0deg);
    }
    25% {
      opacity: 1;
      transform: translateY(-50px) scale(1) rotate(90deg);
    }
    50% {
      opacity: 1;
      transform: translateY(-120px) scale(1.3) rotate(180deg);
    }
    75% {
      opacity: 0.8;
      transform: translateY(-180px) scale(1.1) rotate(270deg);
    }
    100% {
      opacity: 0;
      transform: translateY(-250px) scale(0.8) rotate(360deg);
    }
  }
  
  .massive-heart {
    position: absolute;
    font-size: 40px;
    animation: massiveHeartFloat 5s ease-out forwards;
    text-shadow: 0 0 20px rgba(255,105,180,1), 0 0 40px rgba(255,182,193,0.8);
  }
  
  @keyframes massiveHeartFloat {
    0% {
      opacity: 0;
      transform: translateY(100px) scale(0.3) rotate(0deg);
    }
    20% {
      opacity: 1;
      transform: translateY(50px) scale(1.2) rotate(72deg);
    }
    40% {
      opacity: 1;
      transform: translateY(0px) scale(1.5) rotate(144deg);
    }
    60% {
      opacity: 1;
      transform: translateY(-50px) scale(1.3) rotate(216deg);
    }
    80% {
      opacity: 0.8;
      transform: translateY(-100px) scale(1.1) rotate(288deg);
    }
    100% {
      opacity: 0;
      transform: translateY(-200px) scale(0.8) rotate(360deg);
    }
  }
  
  .fade-in {
    animation: fadeIn 1.2s ease-out forwards;
  }
  
  @keyframes fadeIn {
    from { 
      opacity: 0; 
      transform: translate(-50%, -50%) scale(0.8) rotateY(90deg);
    }
    to { 
      opacity: 1; 
      transform: translate(-50%, -50%) scale(1) rotateY(0deg);
    }
  }
  
  /* ÂìçÂ∫îÂºèËÆæËÆ° */
  @media (max-width: 480px) {
    .button-container {
      flex-direction: column;
      gap: 20px;
    }
    
    .btn {
      min-width: 200px;
      padding: 20px 40px;
      font-size: 18px;
    }
    
    .btn-yes {
      min-width: 240px;
    }
    
    .btn-no {
      min-width: 160px;
    }
    
    .question {
      margin-bottom: 60px;
      padding: 0 15px;
    }
    
    .result-message {
      font-size: 22px;
      padding: 25px 20px;
    }
  }
  
  /* iOS Safari ÂÖºÂÆπÊÄß‰ºòÂåñ */
  @supports (-webkit-touch-callout: none) {
    body {
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      position: fixed;
      width: 100%;
      height: 100%;
    }
    
    .btn {
      -webkit-tap-highlight-color: transparent;
      -webkit-appearance: none;
    }
    
    canvas {
      -webkit-transform: translate3d(0,0,0);
      transform: translate3d(0,0,0);
    }
  }
</style>
</head>
<body>
<canvas id="c"></canvas>

<div class="content" id="mainContent">
  <div class="question">‰Ω†ÊÉ≥Ë¶ÅÁúãÂê¥ÂØíÁéâÁöÑËÖπËÇåÂêóÔºüü§î</div>
  <div class="button-container">
    <button class="btn btn-yes" id="yesBtn">ÊÉ≥Ë¶ÅÁúã ‚ú®</button>
    <button class="btn btn-no" id="noBtn">‰∏çÊÉ≥Ë¶ÅÁúã üò§</button>
  </div>
</div>

<div class="result-message" id="resultMessage"></div>
<div class="heart-container" id="heartContainer"></div>

<script>
(() => {
  // Âä®ÊÄÅÊµÅÊòüËÉåÊôØÊïàÊûú
  const canvas = document.getElementById('c');
  const ctx = canvas.getContext('2d', { alpha: false });
  let DPR = Math.max(window.devicePixelRatio || 1, 1);
  
  const SPAWN_RATE = 0.12;
  const BASE_SPEED = 1200;
  const BASE_SIZE = 3.5;
  const TRAIL_LEN = 18;
  
  let W = 0, H = 0;
  
  function resize() {
    DPR = Math.max(window.devicePixelRatio || 1, 1);
    if (DPR > 2.5) DPR = 2.5;
    W = window.innerWidth;
    H = window.innerHeight;
    canvas.style.width = W + 'px';
    canvas.style.height = H + 'px';
    canvas.width = Math.round(W * DPR);
    canvas.height = Math.round(H * DPR);
    ctx.setTransform(DPR, 0, 0, DPR, 0, 0);
  }
  
  window.addEventListener('resize', resize, {passive: true});
  window.addEventListener('orientationchange', () => setTimeout(resize, 100), {passive: true});
  resize();
  
  class Meteor {
    constructor(x, y, vx, vy, size, color, trailLen) {
      this.x = x;
      this.y = y;
      this.vx = vx;
      this.vy = vy;
      this.size = size;
      this.color = color;
      this.trail = [];
      this.maxTrail = trailLen || TRAIL_LEN;
      this.alive = true;
      this.opacity = Math.random() * 0.5 + 0.5;
    }
    
    update(dt) {
      this.trail.unshift({x: this.x, y: this.y});
      if (this.trail.length > this.maxTrail) this.trail.length = this.maxTrail;
      this.x += this.vx * dt;
      this.y += this.vy * dt;
      const M = 100;
      if (this.x < -M || this.x > W + M || this.y < -M || this.y > H + M) this.alive = false;
    }
    
    draw(ctx) {
      if (this.trail.length > 1) {
        ctx.lineJoin = 'round';
        ctx.lineCap = 'round';
        ctx.globalCompositeOperation = 'lighter';
        for (let i = this.trail.length - 1; i > 0; i--) {
          const p1 = this.trail[i];
          const p2 = this.trail[i - 1];
          const t = (i / this.trail.length);
          const alpha = Math.pow(t, 1.2) * 0.2 * this.opacity;
          ctx.strokeStyle = `rgba(${Math.round(this.color[0] * 255)},${Math.round(this.color[1] * 255)},${Math.round(this.color[2] * 255)},${alpha})`;
          ctx.lineWidth = Math.max(1.5, this.size * (0.5 + t * 1.2));
          ctx.beginPath();
          ctx.moveTo(p1.x, p1.y);
          ctx.lineTo(p2.x, p2.y);
          ctx.stroke();
        }
        ctx.globalCompositeOperation = 'source-over';
      }
      
      const r = this.size;
      const gx = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, r * 3);
      gx.addColorStop(0, `rgba(255,255,255,${0.9 * this.opacity})`);
      gx.addColorStop(0.2, `rgba(${Math.round(this.color[0] * 255)},${Math.round(this.color[1] * 255)},${Math.round(this.color[2] * 255)},${0.8 * this.opacity})`);
      gx.addColorStop(0.5, `rgba(${Math.round(this.color[0] * 255)},${Math.round(this.color[1] * 255)},${Math.round(this.color[2] * 255)},${0.4 * this.opacity})`);
      gx.addColorStop(1, 'rgba(0,0,0,0)');
      ctx.fillStyle = gx;
      ctx.beginPath();
      ctx.arc(this.x, this.y, r * 2.2, 0, Math.PI * 2);
      ctx.fill();
    }
  }
  
  let meteors = [];
  
  function spawnMeteor() {
    const edge = Math.random();
    let sx, sy, vx, vy;
    
    if (edge < 0.6) {
      // ‰ªé‰∏äÊñπÂíåÂ∑¶‰∏äËßíÊù•
      sx = randBetween(-W * 0.2, W * 0.3);
      sy = randBetween(-H * 0.1, H * 0.2);
      const angleVar = (Math.random() - 0.5) * 0.4;
      const speed = randBetween(BASE_SPEED * 0.8, BASE_SPEED * 1.4);
      vx = speed * (0.7 + angleVar);
      vy = speed * (0.6 + angleVar * 0.3);
    } else {
      // ‰ªéÂè≥‰∏äËßíÊù•
      sx = randBetween(W * 0.7, W * 1.2);
      sy = randBetween(-H * 0.1, H * 0.3);
      const angleVar = (Math.random() - 0.5) * 0.3;
      const speed = randBetween(BASE_SPEED * 0.7, BASE_SPEED * 1.2);
      vx = -speed * (0.8 + angleVar);
      vy = speed * (0.5 + angleVar * 0.2);
    }
    
    const size = randBetween(BASE_SIZE * 0.7, BASE_SIZE * 1.6);
    
    const colors = [
      [1.0, 1.0, 0.95],    // ÁôΩËâ≤
      [0.8, 0.9, 1.0],     // Ê∑°ËìùËâ≤
      [1.0, 0.9, 0.7],     // Ê∑°ÈªÑËâ≤
      [0.9, 0.8, 1.0],     // Ê∑°Á¥´Ëâ≤
      [1.0, 0.8, 0.9],     // Ê∑°Á≤âËâ≤
      [0.8, 1.0, 0.9]      // Ê∑°ÁªøËâ≤
    ];
    const color = colors[Math.floor(Math.random() * colors.length)];
    
    meteors.push(new Meteor(sx, sy, vx / 1000, vy / 1000, size, color, TRAIL_LEN));
  }
  
  function randBetween(a, b) { return a + Math.random() * (b - a); }
  
  // ÂàùÂßãÂåñÊµÅÊòü
  for (let i = 0; i < 12; i++) spawnMeteor();
  
  let lastTime = performance.now();
  
  function loop(t) {
    const dt = Math.min(50, t - lastTime);
    lastTime = t;
    const secs = dt / 1000;
    
    if (Math.random() < SPAWN_RATE) spawnMeteor();
    
    // Ê∏êÂèòËÉåÊôØ
    const bgGradient = ctx.createRadialGradient(W/2, H/2, 0, W/2, H/2, Math.max(W, H));
    bgGradient.addColorStop(0, '#0a0a20');
    bgGradient.addColorStop(0.5, '#020214');
    bgGradient.addColorStop(1, '#000008');
    ctx.fillStyle = bgGradient;
    ctx.fillRect(0, 0, W, H);
    
    // Êõ¥Êñ∞ÂíåÁªòÂà∂ÊµÅÊòü
    for (let i = meteors.length - 1; i >= 0; i--) {
      const m = meteors[i];
      m.update(secs * 1000);
      if (!m.alive) {
        meteors.splice(i, 1);
        continue;
      }
      m.draw(ctx);
    }
    
    requestAnimationFrame(loop);
  }
  
  requestAnimationFrame(loop);
  
  // ‰∫§‰∫íÈÄªËæë
  const yesBtn = document.getElementById('yesBtn');
  const noBtn = document.getElementById('noBtn');
  const mainContent = document.getElementById('mainContent');
  const resultMessage = document.getElementById('resultMessage');
  const heartContainer = document.getElementById('heartContainer');
  
  let yesClickCount = 0;
  let gameEnded = false;
  
  // "ÊÉ≥Ë¶ÅÁúã" ÊåâÈíÆÈÄªËæë
  yesBtn.addEventListener('click', (e) => {
    if (gameEnded) return;
    
    e.preventDefault();
    yesClickCount++;
    
    // ÂàõÂª∫ÁÇπÂáªÁà±ÂøÉÊïàÊûú
    createHearts(e.target.getBoundingClientRect());
    
    // ÊåâÈíÆÂ§ßÂ∞èÂèòÂåñ - ÂàùÂßãÊÉ≥Ë¶ÅÁúãÊåâÈíÆ1.2ÂÄçÔºå‰∏çÊÉ≥Ë¶ÅÁúã0.7ÂÄç
    const yesScale = Math.max(0.4, 1.2 - yesClickCount * 0.16);
    const noScale = Math.min(2.0, 0.7 + yesClickCount * 0.26);
    
    yesBtn.style.transform = `scale(${yesScale})`;
    noBtn.style.transform = `scale(${noScale})`;
    
    // ÊåâÈíÆÊñáÂ≠óÂèòÂåñ
    const yesTexts = [
      'ÊÉ≥Ë¶ÅÁúã ‚ú®', 
      'ÁúüÁöÑÊÉ≥Áúã ü•∫', 
      'Ë∂ÖÊÉ≥ÁúãÁöÑ üòç', 
      'ÊãúÊâò‰∫Ü üôè', 
      'ÊúÄÂêé‰∏ÄÊ¨° üíï'
    ];
    if (yesClickCount < yesTexts.length) {
      yesBtn.textContent = yesTexts[yesClickCount];
    }
    
    // ÁÇπÂáª5Ê¨°ÂêéÁöÑÊúÄÁªàÊïàÊûú
    if (yesClickCount >= 5) {
      gameEnded = true;
      mainContent.style.opacity = '0';
      
      setTimeout(() => {
        createMassiveHearts();
        showResult('ÂìàÂìàÂìàÔºÅü§£<br><br>Âê¥ÂØíÁéâÊ≤°ÊúâËÖπËÇåÂï¶ÔΩû<br><br>Âè™ÊúâËΩØËΩØÁöÑÂ∞èËÇöËÇö ü§≠<br><br>üíï Ë¢´È™ó‰∫ÜÂêß üíï');
      }, 800);
    }
  });
  
  // "‰∏çÊÉ≥Ë¶ÅÁúã" ÊåâÈíÆÈÄªËæë
  noBtn.addEventListener('click', (e) => {
    if (gameEnded) return;
    
    e.preventDefault();
    gameEnded = true;
    mainContent.style.opacity = '0';
    
    setTimeout(() => {
      showResult('üòî ‰Ω†Â§±Âéª‰∫ÜËßÇÁúãÂê¥ÂØíÁéâËÖπËÇåÁöÑÊú∫‰ºö<br><br>ÔºàÂÖ∂ÂÆûÂ•π‰πüÊ≤°ÊúâËÖπËÇåÂï¶ üòùÔºâ<br><br>üíî ‰∏ãÊ¨°Ë¶ÅÊäì‰ΩèÊú∫‰ºöÂì¶ üíî');
    }, 800);
  });
  
  function createHearts(buttonRect) {
    const heartSymbols = ['üíñ', 'üíï', 'üíó', 'üíò', 'üíù', 'üíû', 'üíì', 'üíü'];
    
    for (let i = 0; i < 8; i++) {
      const heart = document.createElement('div');
      heart.className = 'heart';
      heart.textContent = heartSymbols[Math.floor(Math.random() * heartSymbols.length)];
      heart.style.left = buttonRect.left + buttonRect.width/2 + (Math.random() - 0.5) * 120 + 'px';
      heart.style.top = buttonRect.top + buttonRect.height/2 + 'px';
      heart.style.fontSize = (25 + Math.random() * 20) + 'px';
      heart.style.animationDelay = Math.random() * 0.5 + 's';
      
      heartContainer.appendChild(heart);
      
      setTimeout(() => heart.remove(), 4000);
    }
  }
  
  function createMassiveHearts() {
    const heartSymbols = ['üíñ', 'üíï', 'üíó', 'üíò', 'üíù', 'üíû', 'üíì', 'üíü', '‚ù§Ô∏è', 'üíã', 'üåπ', 'üíê'];
    
    // ÂàõÂª∫Â§ßÈáèÁà±ÂøÉÊïàÊûú
    for (let i = 0; i < 50; i++) {
      setTimeout(() => {
        const heart = document.createElement('div');
        heart.className = 'massive-heart';
        heart.textContent = heartSymbols[Math.floor(Math.random() * heartSymbols.length)];
        heart.style.left = Math.random() * W + 'px';
        heart.style.top = Math.random() * H + 'px';
        heart.style.fontSize = (30 + Math.random() * 25) + 'px';
        heart.style.animationDelay = Math.random() * 0.8 + 's';
        
        // ÈöèÊú∫È¢úËâ≤
        const colors = ['#ff69b4', '#ff1493', '#dc143c', '#ff6347', '#ff4500', '#ffd700'];
        heart.style.color = colors[Math.floor(Math.random() * colors.length)];
        
        heartContainer.appendChild(heart);
        
        setTimeout(() => heart.remove(), 5000);
      }, i * 80);
    }
  }
  
  function showResult(message) {
    resultMessage.innerHTML = message;
    resultMessage.classList.add('fade-in');
    resultMessage.style.opacity = '1';
  }
  
  // iOSÂÖºÂÆπÊÄß‰ºòÂåñ
  let startY = 0;
  
  document.addEventListener('touchstart', (e) => {
    startY = e.touches[0].clientY;
  }, {passive: true});
  
  document.addEventListener('touchmove', (e) => {
    const currentY = e.touches[0].clientY;
    if ((currentY > startY && window.scrollY <= 0) || (currentY < startY && window.scrollY >= document.body.scrollHeight - window.innerHeight)) {
      e.preventDefault();
    }
  }, {passive: false});
  
  // Èò≤Ê≠¢ÂèåÂáªÁº©Êîæ
  let lastTouchEnd = 0;
  document.addEventListener('touchend', (e) => {
    const now = Date.now();
    if (now - lastTouchEnd <= 300) {
      e.preventDefault();
    }
    lastTouchEnd = now;
  }, {passive: false});
  
})();
</script>
</body>
</html>
