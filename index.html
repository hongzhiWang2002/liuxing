<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no,minimum-scale=1,maximum-scale=1"/>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-touch-fullscreen" content="yes">
<title>å°ç‰ã®ç½‘ç«™</title>
<style>
  * { 
    margin: 0; 
    padding: 0; 
    box-sizing: border-box; 
    -webkit-tap-highlight-color: transparent;
  }
  
  html, body { 
    height: 100vh; 
    width: 100vw;
    background: #020214; 
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans SC", "Microsoft YaHei", sans-serif;
    -webkit-user-select: none; 
    -ms-user-select: none; 
    user-select: none;
    overflow: hidden;
    -webkit-touch-callout: none;
    position: fixed;
    top: 0;
    left: 0;
  }
  
  /* iOS Safari ä¸“ç”¨ä¼˜åŒ– */
  @supports (-webkit-touch-callout: none) {
    html, body {
      -webkit-overflow-scrolling: touch;
      -webkit-transform: translate3d(0,0,0);
      transform: translate3d(0,0,0);
    }
  }
  
  .background {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 1;
    background: radial-gradient(ellipse at center, #0a0a20 0%, #020214 50%, #000008 100%);
  }
  
  .stars {
    position: absolute;
    width: 100%;
    height: 100%;
    background-image: 
      radial-gradient(2px 2px at 20px 30px, #eee, transparent),
      radial-gradient(2px 2px at 40px 70px, rgba(255,255,255,0.8), transparent),
      radial-gradient(1px 1px at 90px 40px, #fff, transparent),
      radial-gradient(1px 1px at 130px 80px, rgba(255,255,255,0.6), transparent),
      radial-gradient(2px 2px at 160px 30px, rgba(255,255,255,0.9), transparent);
    background-repeat: repeat;
    background-size: 200px 100px;
    animation: twinkle 4s linear infinite;
  }
  
  @keyframes twinkle {
    0%, 100% { opacity: 0.8; }
    50% { opacity: 1; }
  }
  
  .shooting-star {
    position: absolute;
    width: 2px;
    height: 2px;
    border-radius: 50%;
    background: linear-gradient(45deg, #fff, transparent);
    animation: shoot 3s linear infinite;
    opacity: 0;
  }
  
  @keyframes shoot {
    0% {
      opacity: 0;
      transform: translateX(-100px) translateY(50px);
    }
    10% {
      opacity: 1;
    }
    90% {
      opacity: 1;
    }
    100% {
      opacity: 0;
      transform: translateX(300px) translateY(-200px);
    }
  }
  
  .shooting-star:nth-child(1) { 
    top: 10%; 
    left: 10%; 
    animation-delay: 0s;
    box-shadow: 0 0 10px #fff, 0 0 20px #87ceeb, -10px 5px 30px rgba(255,255,255,0.3);
  }
  
  .shooting-star:nth-child(2) { 
    top: 30%; 
    left: 20%; 
    animation-delay: 1s;
    box-shadow: 0 0 10px #fff, 0 0 20px #ffb6c1, -10px 5px 30px rgba(255,182,193,0.3);
  }
  
  .shooting-star:nth-child(3) { 
    top: 50%; 
    left: 30%; 
    animation-delay: 2s;
    box-shadow: 0 0 10px #fff, 0 0 20px #dda0dd, -10px 5px 30px rgba(221,160,221,0.3);
  }
  
  .shooting-star:nth-child(4) { 
    top: 20%; 
    left: 50%; 
    animation-delay: 0.5s;
    box-shadow: 0 0 10px #fff, 0 0 20px #87ceeb, -10px 5px 30px rgba(255,255,255,0.3);
  }
  
  .shooting-star:nth-child(5) { 
    top: 70%; 
    left: 60%; 
    animation-delay: 1.5s;
    box-shadow: 0 0 10px #fff, 0 0 20px #f0e68c, -10px 5px 30px rgba(240,230,140,0.3);
  }
  
  .content {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 10;
    padding: 20px;
    text-align: center;
    transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .question {
    font-size: clamp(24px, 6vw, 36px);
    color: #fff;
    margin-bottom: 50px;
    text-shadow: 
      0 0 20px rgba(255,255,255,0.9), 
      0 0 40px rgba(135,206,250,0.7), 
      0 0 60px rgba(255,182,193,0.5);
    animation: glow 2s ease-in-out infinite alternate;
    font-weight: 700;
    line-height: 1.4;
    letter-spacing: 1px;
    max-width: 90%;
  }
  
  @keyframes glow {
    from { 
      text-shadow: 
        0 0 20px rgba(255,255,255,0.9), 
        0 0 40px rgba(135,206,250,0.7), 
        0 0 60px rgba(255,182,193,0.5);
      transform: scale(1);
    }
    to { 
      text-shadow: 
        0 0 30px rgba(255,255,255,1), 
        0 0 60px rgba(135,206,250,0.9), 
        0 0 80px rgba(255,182,193,0.7);
      transform: scale(1.02);
    }
  }
  
  .button-container {
    display: flex;
    gap: 30px;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
  }
  
  .btn {
    padding: 18px 36px;
    border: none;
    border-radius: 30px;
    font-size: 20px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    box-shadow: 0 12px 40px rgba(0,0,0,0.4);
    backdrop-filter: blur(15px);
    border: 2px solid rgba(255,255,255,0.1);
    -webkit-appearance: none;
    -webkit-tap-highlight-color: transparent;
  }
  
  .btn:before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: left 0.6s;
  }
  
  .btn:hover:before,
  .btn:active:before {
    left: 100%;
  }
  
  .btn-angry {
    background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 50%, #fd79a8 100%);
    color: white;
    min-width: 160px;
    transform: scale(0.7);
    box-shadow: 0 8px 30px rgba(255, 107, 107, 0.3);
  }
  
  .btn-forgive {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
    color: white;
    min-width: 200px;
    transform: scale(1.2);
    box-shadow: 0 15px 50px rgba(102, 126, 234, 0.4);
  }
  
  .btn:active {
    transform: scale(0.95) !important;
  }
  
  .result-message {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: clamp(20px, 4vw, 28px);
    color: #fff;
    text-align: center;
    opacity: 0;
    text-shadow: 
      0 0 30px rgba(255,255,255,0.9), 
      0 0 50px rgba(255,182,193,0.7);
    font-weight: 700;
    line-height: 1.6;
    z-index: 30;
    padding: 30px;
    border-radius: 20px;
    background: rgba(0,0,0,0.3);
    backdrop-filter: blur(20px);
    border: 2px solid rgba(255,255,255,0.1);
    max-width: 90%;
    transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .heart-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    pointer-events: none;
    z-index: 25;
    overflow: hidden;
  }
  
  .heart {
    position: absolute;
    font-size: 30px;
    animation: heartFloat 4s ease-out forwards;
    text-shadow: 0 0 15px rgba(255,105,180,0.9);
    pointer-events: none;
  }
  
  @keyframes heartFloat {
    0% {
      opacity: 1;
      transform: translateY(0) scale(0.5) rotate(0deg);
    }
    25% {
      opacity: 1;
      transform: translateY(-50px) scale(1) rotate(90deg);
    }
    50% {
      opacity: 1;
      transform: translateY(-120px) scale(1.3) rotate(180deg);
    }
    75% {
      opacity: 0.8;
      transform: translateY(-180px) scale(1.1) rotate(270deg);
    }
    100% {
      opacity: 0;
      transform: translateY(-250px) scale(0.8) rotate(360deg);
    }
  }
  
  .massive-heart {
    position: absolute;
    font-size: 40px;
    animation: massiveHeartFloat 5s ease-out forwards;
    text-shadow: 
      0 0 20px rgba(255,105,180,1), 
      0 0 40px rgba(255,182,193,0.8);
    pointer-events: none;
  }
  
  @keyframes massiveHeartFloat {
    0% {
      opacity: 0;
      transform: translateY(100px) scale(0.3) rotate(0deg);
    }
    20% {
      opacity: 1;
      transform: translateY(50px) scale(1.2) rotate(72deg);
    }
    40% {
      opacity: 1;
      transform: translateY(0px) scale(1.5) rotate(144deg);
    }
    60% {
      opacity: 1;
      transform: translateY(-50px) scale(1.3) rotate(216deg);
    }
    80% {
      opacity: 0.8;
      transform: translateY(-100px) scale(1.1) rotate(288deg);
    }
    100% {
      opacity: 0;
      transform: translateY(-200px) scale(0.8) rotate(360deg);
    }
  }
  
  .fade-in {
    animation: fadeIn 1.2s ease-out forwards;
  }
  
  @keyframes fadeIn {
    from { 
      opacity: 0; 
      transform: translate(-50%, -50%) scale(0.8) rotateY(90deg);
    }
    to { 
      opacity: 1; 
      transform: translate(-50%, -50%) scale(1) rotateY(0deg);
    }
  }
  
  /* å“åº”å¼è®¾è®¡ */
  @media (max-width: 480px) {
    .button-container {
      flex-direction: column;
      gap: 20px;
    }
    
    .btn {
      min-width: 200px;
      padding: 20px 40px;
      font-size: 18px;
    }
    
    .btn-forgive {
      min-width: 260px;
    }
    
    .btn-angry {
      min-width: 180px;
    }
    
    .question {
      margin-bottom: 60px;
      padding: 0 15px;
      font-size: clamp(20px, 7vw, 28px);
    }
    
    .result-message {
      font-size: clamp(18px, 5vw, 24px);
      padding: 25px 20px;
    }
    
    .shooting-star {
      display: none; /* åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šéšè—å¯èƒ½æœ‰é—®é¢˜çš„åŠ¨ç”» */
    }
  }
  
  /* iOS è®¾å¤‡ç‰¹å®šä¼˜åŒ– */
  @media screen and (-webkit-min-device-pixel-ratio: 2) {
    body {
      -webkit-transform: translateZ(0);
      transform: translateZ(0);
    }
    
    .background, .stars {
      -webkit-transform: translate3d(0,0,0);
      transform: translate3d(0,0,0);
    }
  }
</style>
</head>
<body>

<div class="background">
  <div class="stars"></div>
  <div class="shooting-star"></div>
  <div class="shooting-star"></div>
  <div class="shooting-star"></div>
  <div class="shooting-star"></div>
  <div class="shooting-star"></div>
</div>

<div class="content" id="mainContent">
  <div class="question">å°ç‰å®å®åˆ«ç”Ÿæ°”å•¦ï¼ŸğŸ¤”</div>
  <div class="button-container">
    <button class="btn btn-angry" id="angryBtn">å»æ­»å¥½å—ï¼Ÿ ğŸ˜¤</button>
    <button class="btn btn-forgive" id="forgiveBtn">åŸè°…ä½ å•¦ï¼âœ¨</button>
  </div>
</div>

<div class="result-message" id="resultMessage"></div>
<div class="heart-container" id="heartContainer"></div>

<script>
(() => {
  'use strict';
  
  // æ£€æµ‹æ˜¯å¦ä¸ºiOSè®¾å¤‡
  const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
  const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
  
  // iOSå…¼å®¹æ€§ä¼˜åŒ–
  if (isIOS) {
    document.body.style.webkitTransform = 'translate3d(0,0,0)';
    document.body.style.transform = 'translate3d(0,0,0)';
  }
  
  // äº¤äº’é€»è¾‘
  const angryBtn = document.getElementById('angryBtn');
  const forgiveBtn = document.getElementById('forgiveBtn');
  const mainContent = document.getElementById('mainContent');
  const resultMessage = document.getElementById('resultMessage');
  const heartContainer = document.getElementById('heartContainer');
  
  let angryClickCount = 0;
  let gameEnded = false;
  let touchHandled = false;
  
  // é˜²æ­¢iOSåŒå‡»ç¼©æ”¾
  let lastTouchEnd = 0;
  document.addEventListener('touchend', function (event) {
    const now = Date.now();
    if (now - lastTouchEnd <= 300) {
      event.preventDefault();
    }
    lastTouchEnd = now;
  }, {passive: false});
  
  // é˜²æ­¢iOSæ»šåŠ¨
  document.addEventListener('touchmove', function(e) {
    e.preventDefault();
  }, {passive: false});
  
  // "å»æ­»å¥½å—ï¼Ÿ" æŒ‰é’®é€»è¾‘ - è¿™ä¸ªæŒ‰é’®ä¼šè¶Šç‚¹è¶Šå°
  function handleAngryClick(e) {
    if (gameEnded || touchHandled) return;
    
    e.preventDefault();
    e.stopPropagation();
    touchHandled = true;
    
    setTimeout(() => { touchHandled = false; }, 300);
    
    angryClickCount++;
    
    // åˆ›å»ºç‚¹å‡»çˆ±å¿ƒæ•ˆæœ
    createHearts(e.target.getBoundingClientRect());
    
    // æŒ‰é’®å¤§å°å˜åŒ–ï¼šç”Ÿæ°”æŒ‰é’®è¶Šæ¥è¶Šå°ï¼ŒåŸè°…æŒ‰é’®è¶Šæ¥è¶Šå¤§
    const angryScale = Math.max(0.3, 0.7 - angryClickCount * 0.08);
    const forgiveScale = Math.min(2.2, 1.2 + angryClickCount * 0.2);
    
    angryBtn.style.transform = `scale(${angryScale})`;
    forgiveBtn.style.transform = `scale(${forgiveScale})`;
    
    // æŒ‰é’®æ–‡å­—å˜åŒ–
    const angryTexts = [
      'ç»™æˆ‘æ­»æ»šï¼ğŸ˜¡', 
      'åˆ«ç‹—å«äº†ï¼ğŸ¤¬', 
      'broä½ ä¹Ÿé…ï¼ŸğŸ™„', 
      'å›å®¶å§å­©å­ğŸ¥±', 
      'ä¸å¯èƒ½çš„ï¼ğŸ˜¤'
    ];
    if (angryClickCount < angryTexts.length) {
      angryBtn.textContent = angryTexts[angryClickCount];
    }
    
    // ç‚¹å‡»5æ¬¡åçš„æœ€ç»ˆæ•ˆæœ
    if (angryClickCount >= 5) {
      gameEnded = true;
      mainContent.style.opacity = '0';
      
      setTimeout(() => {
        createMassiveHearts();
        showResult('å“ˆå“ˆå“ˆï¼ğŸ¤£<br><br>ç‰ç±³è±†æ²¡æœ‰ç”Ÿæ°”å•¦ï½<br><br>ç‹å®æ™ºä½ ä¸ªå‚»å­ğŸ’•<br><br>ğŸ’• è¢«éª—äº†å§ ğŸ’•');
      }, 800);
    }
  }
  
  // "åŸè°…ä½ å•¦ï¼" æŒ‰é’®é€»è¾‘ - ç›´æ¥ç»“æŸæ¸¸æˆ
  function handleForgiveClick(e) {
    if (gameEnded || touchHandled) return;
    
    e.preventDefault();
    e.stopPropagation();
    touchHandled = true;
    
    setTimeout(() => { touchHandled = false; }, 300);
    
    gameEnded = true;
    mainContent.style.opacity = '0';
    
    setTimeout(() => {
      createMassiveHearts();
      showResult('è°¢è°¢å®å®ï¼ğŸ’•<br><br>ï¼ˆçˆ±ä½ å®è´ğŸ˜ï¼‰<br><br>ğŸ’– äº²äº²æŠ±æŠ±ä¸¾é«˜é«˜ ğŸ’–');
    }, 800);
  }
  
  // ç»‘å®šäº‹ä»¶ï¼ˆåŒæ—¶æ”¯æŒç‚¹å‡»å’Œè§¦æ‘¸ï¼‰
  angryBtn.addEventListener('click', handleAngryClick, {passive: false});
  angryBtn.addEventListener('touchend', handleAngryClick, {passive: false});
  
  forgiveBtn.addEventListener('click', handleForgiveClick, {passive: false});
  forgiveBtn.addEventListener('touchend', handleForgiveClick, {passive: false});
  
  function createHearts(buttonRect) {
    const heartSymbols = ['ğŸ’–', 'ğŸ’•', 'ğŸ’—', 'ğŸ’˜', 'ğŸ’', 'ğŸ’', 'ğŸ’“', 'ğŸ’Ÿ'];
    
    for (let i = 0; i < 8; i++) {
      setTimeout(() => {
        const heart = document.createElement('div');
        heart.className = 'heart';
        heart.textContent = heartSymbols[Math.floor(Math.random() * heartSymbols.length)];
        
        const centerX = buttonRect.left + buttonRect.width / 2;
        const centerY = buttonRect.top + buttonRect.height / 2;
        
        heart.style.left = (centerX + (Math.random() - 0.5) * 120) + 'px';
        heart.style.top = centerY + 'px';
        heart.style.fontSize = (25 + Math.random() * 20) + 'px';
        heart.style.animationDelay = Math.random() * 0.5 + 's';
        
        heartContainer.appendChild(heart);
        
        setTimeout(() => {
          if (heart.parentNode) {
            heart.parentNode.removeChild(heart);
          }
        }, 4000);
      }, i * 100);
    }
  }
  
  function createMassiveHearts() {
    const heartSymbols = ['ğŸ’–', 'ğŸ’•', 'ğŸ’—', 'ğŸ’˜', 'ğŸ’', 'ğŸ’', 'ğŸ’“', 'ğŸ’Ÿ', 'â¤ï¸', 'ğŸ’‹', 'ğŸŒ¹', 'ğŸ’'];
    
    // åˆ›å»ºå¤§é‡çˆ±å¿ƒæ•ˆæœ
    for (let i = 0; i < 50; i++) {
      setTimeout(() => {
        const heart = document.createElement('div');
        heart.className = 'massive-heart';
        heart.textContent = heartSymbols[Math.floor(Math.random() * heartSymbols.length)];
        heart.style.left = Math.random() * window.innerWidth + 'px';
        heart.style.top = Math.random() * window.innerHeight + 'px';
        heart.style.fontSize = (30 + Math.random() * 25) + 'px';
        heart.style.animationDelay = Math.random() * 0.8 + 's';
        
        // éšæœºé¢œè‰²
        const colors = ['#ff69b4', '#ff1493', '#dc143c', '#ff6347', '#ff4500', '#ffd700'];
        heart.style.color = colors[Math.floor(Math.random() * colors.length)];
        
        heartContainer.appendChild(heart);
        
        setTimeout(() => {
          if (heart.parentNode) {
            heart.parentNode.removeChild(heart);
          }
        }, 5000);
      }, i * 80);
    }
  }
  
  function showResult(message) {
    resultMessage.innerHTML = message;
    resultMessage.classList.add('fade-in');
    resultMessage.style.opacity = '1';
  }
  
  // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
  document.addEventListener('DOMContentLoaded', function() {
    // ç¡®ä¿é¡µé¢å®Œå…¨åŠ è½½
    setTimeout(() => {
      if (isIOS) {
        // iOSç‰¹å®šçš„åˆå§‹åŒ–
        document.body.style.height = '100vh';
        document.body.style.overflow = 'hidden';
      }
    }, 100);
  });
  
})();
</script>
</body>
</html>
